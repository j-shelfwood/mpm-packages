#!/bin/bash
# Pre-commit hook for mpm-packages
# Runs CraftOS integration scenarios before allowing commits

set -e

MPM_PACKAGES="$(git rev-parse --show-toplevel)"

echo "Running pre-commit CraftOS integration tests..."
echo ""

if ! "$MPM_PACKAGES/tests/craftos/run_tests.sh"; then
    echo ""
    echo "CraftOS integration tests failed"
    exit 1
fi

echo ""
echo "All CraftOS integration tests passed"
exit 0
